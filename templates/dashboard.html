{% extends "includes/layout.html" %}

{% block body %}
<div class="container-fluid">
  <div class="row"><div class="col-lg-12"><span>&nbsp;</span></div></div>
  <!-- ButtonBar -->
  <div class="row">
    <div class="col-lg-1"></div>
    <div class="col-lg-10 text-left">
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addJobModal">Adicionar</button>
      <button type="button" class="btn btn-primary"onClick="teste_js()">Teste</button>
    </div>
    <div class="col-lg-1"></div>
  </div>
  <!-- ButtonBar end -->
  <div class="row"><div class="col-lg-12"><span>&nbsp;</span></div></div>
  <!-- Table -->
  <div class="row" id="dashboard_table">
    <div class="col-lg-1"></div>
    <div class="col-lg-10">
      <div class="table-responsive text-center">
        <table class="table table-striped table-hover">
          <thead class="thead-dark">
            <tr>
              <th scope="col"></th>
              <th scope="col">ID</th>
              <th scope="col">Cron</th>
              <th scope="col">DependÃªncias</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for job in jobs %}
                <tr data-toggle="modal" data-id="teste_1" data-target="#editJobModal">
                  <th scope="row"><input type="checkbox"></th>
                  <td>{{ job.name }}</td>
                  <td>{{ job.name }}</td>
                  <td>{{ job.name }}</td>
                  <td><span class="badge badge-pill badge-success">&nbsp;</span></td>
                </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="col-lg-1"></div>
  </div>
  <!-- Table end -->
</div>

<!-- AddJob Modal -->
<div class="modal fade" id="addJobModal" tabindex="-1" role="dialog" aria-labelledby="addJobModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
        <form action="add_job" method="post">
            <div class="modal-header">
                <h5 class="modal-title" id="addJobModalLabel">Add Job</h5>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="job_name">Name</label>
                    <input type="text" class="form-control" name="job_name" id="job_name" placeholder="Nome">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>
  </div>
</div>
<!-- AddJob Modal end -->

<!-- EditJob Modal -->
<div class="modal fade" id="editJobModal" tabindex="-1" role="dialog" aria-labelledby="editJobModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editJobModalLabel">teste_1</h5>
      </div>
      <div class="modal-body">
        editJobModal
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" onClick="initialize()">Salvar</button>
      </div>
    </div>
  </div>
</div>
<!-- EditJob Modal end -->

<!-- JS -->
<script type="text/javascript">
  function initialize() {
    pywebview.api.init().then(alert(response));
  }

  function teste_js() {
    params = {'message': 'teste_js'};
    pywebview.api.teste_py(params).then(function(response) {
        alert(response);
    });
  }

  $(function(){
    $('#addJobModal').on('click', function(){ //subscribe to show method
      $("#addJobModal").modal('show', function(){
        initialize();
      });
    });
  });

  $(function(){
    $('#editJobModal').on('click', function(){ //subscribe to show method
      $("#editJobModal").modal('show');
    });
  });
</script>
<!-- JS end -->
{% endblock %}